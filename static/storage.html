<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Storage Manager - Alternative CBD</title>
    <meta name="description" content="Manage your Google Cloud Storage files">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="grain-overlay"></div>
    
    <div class="container">
        <header class="header">
            <img src="https://www.alternativecbd.es/wp-content/uploads/2marca-final-anternativeCBD-vertical-transparente-blanc800-min-300x244.png" 
                 alt="Alternative CBD Logo" 
                 class="logo"
                 id="logo">
            <nav class="nav-menu">
                <a href="/" class="nav-link">Inicio</a>
                <a href="/storage" class="nav-link active">Cloud Storage</a>
            </nav>
        </header>

        <main class="main-content">
            <div class="upload-card">
                <div class="storage-header">
                    <div>
                        <h1 class="title">Gestión de Cloud Storage</h1>
                        <p class="subtitle">Gestiona archivos en: <code>gs://alternativecbd-glop-reports/</code></p>
                    </div>
                    <button class="upload-btn secondary-btn" id="refreshBtn">
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M1 4V10H7M23 20V14H17M20.49 9C19.9828 7.56678 19.1209 6.28536 17.9845 5.26927C16.8482 4.25318 15.4745 3.53212 13.9917 3.16882C12.5089 2.80552 10.9652 2.81116 9.48528 3.18517C8.00535 3.55918 6.63684 4.29098 5.51 5.32L1 10M23 14L18.49 18.68C17.3632 19.709 15.9947 20.4408 14.5147 20.8148C13.0348 21.1888 11.4911 21.1945 10.0083 20.8312C8.52547 20.4679 7.1518 19.7468 6.01547 18.7307C4.87913 17.7146 4.01717 16.4332 3.51 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span class="btn-text">Actualizar</span>
                    </button>
                </div>

                <!-- Connection Status -->
                <div class="gcs-status" id="gcsStatus">
                    <div class="status-indicator">
                        <div class="status-dot pulsing"></div>
                        <span id="statusText">Verificando conexión...</span>
                    </div>
                </div>

                <!-- Upload Section -->
                <div class="upload-section">
                    <h2 class="section-title">Subir Archivo</h2>
                    <div class="upload-zone" id="uploadZone">
                        <input type="file" 
                               id="fileInput" 
                               class="file-input">
                        
                        <div class="upload-icon-wrapper">
                            <svg class="upload-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 15V3M12 3L8 7M12 3L16 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M2 17L2.621 19.485C2.72915 19.9177 2.97882 20.3018 3.33033 20.5763C3.68184 20.8508 4.11501 20.9999 4.561 21H19.439C19.885 20.9999 20.3182 20.8508 20.6697 20.5763C21.0212 20.3018 21.2708 19.9177 21.379 19.485L22 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        
                        <p class="upload-text">
                            <span class="upload-text-main">Seleccionar archivo</span>
                            <span class="upload-text-sub">o arrastrar aquí</span>
                        </p>
                    </div>

                    <div class="file-info" id="fileInfo" style="display: none;">
                        <div class="file-details">
                            <svg class="file-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 2V8H20" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <div class="file-text">
                                <p class="file-name" id="fileName"></p>
                                <p class="file-size" id="fileSize"></p>
                            </div>
                        </div>
                        <button class="remove-btn" id="removeBtn" type="button">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </button>
                    </div>

                    <button class="upload-btn" id="uploadBtn" disabled>
                        <span class="btn-text">Subir a Cloud Storage</span>
                        <svg class="btn-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7 16C5.89543 16 5 15.1046 5 14C5 12.8954 5.89543 12 7 12C7 9.23858 9.23858 7 12 7C14.419 7 16.4367 8.71776 16.9 11M17 16C18.1046 16 19 15.1046 19 14C19 12.8954 18.1046 12 17 12C17 9.23858 14.7614 7 12 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 13V21M12 13L9 16M12 13L15 16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>

                <!-- Filters -->
                <div class="filters-section">
                    <h2 class="section-title">Archivos en el Bucket</h2>
                    <div class="filters-row">
                        <div class="search-box">
                            <svg class="search-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 21L15 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            <input type="text" id="searchInput" placeholder="Buscar archivos..." class="search-input">
                        </div>
                        <input type="text" id="prefixFilter" placeholder="Prefijo (ej: reports/)" class="filter-input">
                    </div>
                </div>

                <!-- Stats -->
                <div class="storage-stats" id="storageStats" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-label">Total Archivos</div>
                        <div class="stat-value" id="totalFiles">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Tamaño Total</div>
                        <div class="stat-value" id="totalSize">0 MB</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Bucket</div>
                        <div class="stat-value" style="font-size: 0.9rem;">alternativecbd-glop-reports</div>
                    </div>
                </div>

                <!-- Files List -->
                <div class="files-section" id="filesSection" style="display: none;">
                    <div class="table-container">
                        <table class="data-table files-table">
                            <thead>
                                <tr>
                                    <th>Nombre</th>
                                    <th>Tamaño</th>
                                    <th>Tipo</th>
                                    <th>Creado</th>
                                    <th>Modificado</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="filesTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="status-message" id="statusMessage" style="display: none;"></div>
            </div>
        </main>

        <footer class="footer">
            <p>© 2025 Alternative CBD. Todos los derechos reservados.</p>
        </footer>
    </div>

    <!-- File Details Modal -->
    <div class="modal" id="fileModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Detalles del Archivo</h3>
                <button class="modal-close" id="modalClose">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="modalBody"></div>
        </div>
    </div>

    <script src="/static/storage.js"></script>
</body>
</html>
